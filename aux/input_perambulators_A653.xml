<QudaLaph>
  <EchoXML/>
  <LatticeLayoutInfo>
     <XYZTExtents>24 24 24 48</XYZTExtents>
  </LatticeLayoutInfo>
  <QudaInfo>
     <CPUPrecision>double</CPUPrecision>
     <CUDAPrecision>double</CUDAPrecision>
     <CUDASloppyPrecision>single</CUDASloppyPrecision>
  </QudaInfo>
  <Verbosity>none</Verbosity>

  <Task>
     <Name>SMEAR_GAUGE_FIELD</Name>
     <GaugeConfigurationInfo>
        <EnsembleName>CLS_A653</EnsembleName>
        <FileFormat>CERN</FileFormat>
        <ConfigType>WilsonImproved</ConfigType>
        <FileName>/latticeQCD/raid4/laph/cls21_A653_r000/cfgs/A653r000n1</FileName>
        <ConfigNumber>1</ConfigNumber>
     </GaugeConfigurationInfo>
     <GluonStoutSmearingInfo>
        <LinkIterations>20</LinkIterations>
        <LinkStapleWeight>0.1</LinkStapleWeight>
     </GluonStoutSmearingInfo>
   <!--  <SmearedGaugeFileName>outputfilenameifdesired</SmearedGaugeFileName> -->
  </Task>

  <Task>
     <Name>SMEAR_QUARK_FIELD</Name>
     <GaugeConfigurationInfo>
        <EnsembleName>CLS_A653</EnsembleName>
        <FileFormat>CERN</FileFormat>
        <ConfigType>WilsonImproved</ConfigType>
        <FileName>/latticeQCD/raid4/laph/cls21_A653_r000/cfgs/A653r000n1</FileName>
        <ConfigNumber>1</ConfigNumber>
     </GaugeConfigurationInfo>
     <GluonStoutSmearingInfo>
        <LinkIterations>20</LinkIterations>
        <LinkStapleWeight>0.1</LinkStapleWeight>
     </GluonStoutSmearingInfo>
    <!-- <SmearedGaugeFileName>/path/smg_field</SmearedGaugeFileName> (include if need to read from file) -->
     <QuarkLaphSmearingInfo>
        <LaphSigmaCutoff>0.32</LaphSigmaCutoff>
        <NumberLaphEigvecs> 32 </NumberLaphEigvecs>
     </QuarkLaphSmearingInfo>
    <!-- <SmearedQuarkFileStub>outputfilestubnameifdesired</SmearedQuarkFileStub> -->
     <LaphEigenSolverInfo>
        <ResidualTolerance>1.0e-12</ResidualTolerance>
        <MaxIterations>200</MaxIterations>
        <KrylovDimension>64</KrylovDimension>
        <ChebyshevOrder>8</ChebyshevOrder>
        <MaxEigenvalue>15.0</MaxEigenvalue>
        <CutoffEigenvalue>0.5</CutoffEigenvalue>
     </LaphEigenSolverInfo>
     <Verbosity>low</Verbosity> 
     <PrintEigenvalues/> 
  </Task>

  <Task>
     <Name>LAPH_QUARK_PERAMBULATORS</Name>
     <QuarkPerambulatorInfo>
        <GaugeConfigurationInfo>
           <EnsembleName>CLS_A653</EnsembleName>
           <FileFormat>CERN</FileFormat>
           <ConfigType>WilsonImproved</ConfigType>
           <FileName>/latticeQCD/raid4/laph/cls21_A653_r000/cfgs/A653r000n1</FileName>
           <ConfigNumber>1</ConfigNumber>
           <FermionTimeBC>antiperiodic</FermionTimeBC>
        </GaugeConfigurationInfo>
        <GluonStoutSmearingInfo>
           <LinkIterations>20</LinkIterations>
           <LinkStapleWeight>0.1</LinkStapleWeight>
        </GluonStoutSmearingInfo>
        <QuarkLaphSmearingInfo>
           <LaphSigmaCutoff>0.32</LaphSigmaCutoff>
           <NumberLaphEigvecs> 32 </NumberLaphEigvecs>
        </QuarkLaphSmearingInfo>
      <!--  <SmearedQuarkFileStub>/path/sq_field</SmearedQuarkFileStub> (include to read from file) -->
        <QuarkActionInfo>
           <Name> WILSON_CLOVER </Name>
           <Flavor> ud </Flavor>
           <Kappa>0.1365716</Kappa>
           <clovCoeff>2.0668577</clovCoeff>
           <TimeBC> antiperiodic </TimeBC>
         </QuarkActionInfo>
        <FileListInfo>
           <FileNameStub>/latticeQCD/raid4/laph/cls21_A653_r000/quark_sinks/1/quark_perambs_test_mpi</FileNameStub>
           <MinFileNumber>0</MinFileNumber>
           <MaxFileNumber>1000</MaxFileNumber>
        </FileListInfo>
     <!--   <InverterInfo>            
           <Name>CGNR</Name> 
           <Tolerance>1.0e-10</Tolerance>
           <MaxIterations>35000</MaxIterations>
        </InverterInfo> -->
     <!--   <InverterInfo>            
           <Name>BICGSTAB</Name> 
           <Tolerance>1.0e-11</Tolerance>
           <MaxIterations>35000</MaxIterations>
        </InverterInfo> -->
     <!--   <InverterInfo>            
           <Name>GCR</Name> 
           <Tolerance>1.0e-11</Tolerance>
           <MaxIterations>35000</MaxIterations>
           <NKrylov>24</NKrylov>
        </InverterInfo> -->

        <InverterInfo>            
           <Name>GCR_MULTIGRID</Name>
      <!--     <MGPreconditioner>
              <NumLevels>2</NumLevels>
              <Level0>
                 <XYZTBlockExtents>6 6 6 6</XYZTBlockExtents>
              </Level0>
              <Level1>
                 <TRLMDeflation>
                    <NumVectors> 32 </NumVectors>
                    <Tolerance> 1e-6 </Tolerance> 
                    <MaxIterations> 100 </MaxIterations>
                    <ChebyshevOrder> 8 </ChebyshevOrder> 
                    <CutoffEigenvalue> 0.1 </CutoffEigenvalue> 
                 </TRLMDeflation>
              </Level1>
              <PreOrthoNullVectors>false</PreOrthoNullVectors>
              <PostOrthoNullVectors>false</PostOrthoNullVectors>
           </MGPreconditioner> -->
        </InverterInfo>
      <!--  <ExtraSolutionChecks/> -->
     </QuarkPerambulatorInfo> 
     <ComputationSet>
        <NumSinksBeforeProject>  4 </NumSinksBeforeProject>
        <NumSinksInProjectBatch> 4 </NumSinksInProjectBatch>
        <NumEigsInProjectBatch>  4 </NumEigsInProjectBatch>
        <Computation>
           <SourceTime>8</SourceTime>
           <SourceLaphEigvecIndices>24  27 28 </SourceLaphEigvecIndices>
        </Computation>
        <Computation>
           <SourceTime>12</SourceTime>
           <SourceLaphEigvecIndexMin>29</SourceLaphEigvecIndexMin>
           <SourceLaphEigvecIndexMax>31</SourceLaphEigvecIndexMax>
        </Computation>
     </ComputationSet>
     <Verbosity>low</Verbosity> 
     <PrintCoefficients/> 
  </Task> 

  <Task>
     <Name>LAPH_QUARK_PERAMBULATORS</Name>
     <QuarkPerambulatorInfo>
        <GaugeConfigurationInfo>
           <EnsembleName>CLS_A653</EnsembleName>
           <FileFormat>CERN</FileFormat>
           <ConfigType>WilsonImproved</ConfigType>
           <FileName>/latticeQCD/raid4/laph/cls21_A653_r000/cfgs/A653r000n1</FileName>
           <ConfigNumber>1</ConfigNumber>
           <FermionTimeBC>antiperiodic</FermionTimeBC>
        </GaugeConfigurationInfo>
        <GluonStoutSmearingInfo>
           <LinkIterations>20</LinkIterations>
           <LinkStapleWeight>0.1</LinkStapleWeight>
        </GluonStoutSmearingInfo>
        <QuarkLaphSmearingInfo>
           <LaphSigmaCutoff>0.32</LaphSigmaCutoff>
           <NumberLaphEigvecs> 32 </NumberLaphEigvecs>
        </QuarkLaphSmearingInfo>
      <!--  <SmearedQuarkFileStub>/path/sq_field</SmearedQuarkFileStub> (include to read from file) -->
        <QuarkActionInfo>
           <Name> WILSON_CLOVER </Name>
           <Flavor> ud </Flavor>
           <Kappa>0.1365716</Kappa>
           <clovCoeff>2.0668577</clovCoeff>
           <TimeBC> antiperiodic </TimeBC>
         </QuarkActionInfo>
        <FileListInfo>
           <FileNameStub>/latticeQCD/raid4/laph/cls21_A653_r000/quark_sinks/1/quark_perambs_test_mpi</FileNameStub>
           <MinFileNumber>0</MinFileNumber>
           <MaxFileNumber>1000</MaxFileNumber>
        </FileListInfo>
     <!--   <InverterInfo>            
           <Name>CG</Name> 
           <Tolerance>1.0e-10</Tolerance>
           <MaxIterations>35000</MaxIterations>
        </InverterInfo> -->
    <!--    <InverterInfo>            
           <Name>BICGSTAB</Name> 
           <Tolerance>1.0e-11</Tolerance>
           <MaxIterations>35000</MaxIterations>
        </InverterInfo> -->
   <!--     <InverterInfo>            
           <Name>GCR</Name> 
           <Tolerance>1.0e-11</Tolerance>
           <MaxIterations>35000</MaxIterations>
           <NKrylov>24</NKrylov>
        </InverterInfo> -->

        <InverterInfo>            
           <Name>GCR_MULTIGRID</Name>
           <MGPreconditioner>
              <NumLevels>2</NumLevels>
              <Level0>
                 <XYZTBlockExtents>4 6 6 6</XYZTBlockExtents>
              </Level0>
           </MGPreconditioner>
        </InverterInfo>
        <ExtraSolutionChecks/>
     </QuarkPerambulatorInfo> 
     <ComputationSet>
        <NumSinksBeforeProject>  4 </NumSinksBeforeProject>
        <NumSinksInProjectBatch> 4 </NumSinksInProjectBatch>
        <NumEigsInProjectBatch>  4 </NumEigsInProjectBatch>
        <Computation>
           <SourceTime>8</SourceTime>
           <SourceLaphEigvecIndices>12 17 25</SourceLaphEigvecIndices>
        </Computation>
        <Computation>
           <SourceTime>12</SourceTime>
           <SourceLaphEigvecIndexMin>26</SourceLaphEigvecIndexMin>
           <SourceLaphEigvecIndexMax>28</SourceLaphEigvecIndexMax>
        </Computation>
     </ComputationSet>
     <Verbosity>none</Verbosity>  <!-- to override the default verbosity -->
     <PrintCoefficients/>         <!-- optional -->
  </Task> 

</QudaLaph>
